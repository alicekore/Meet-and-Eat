{% extends 'meetandeat/dashboard.html' %}
{% load static %}
{% load tz %}

{% block css %}
{{ form.media.css }}
<style>
    .select2-selection__rendered {
        line-height: 2em !important;
    }
</style>
{% endblock css %}
{% block events %}

{% if event_list %}
{% for event in event_list %}
{% if  event.visible == True %}
<div class="container rounded p-3 my-4 bg-custom-secondary">
    <div class="row">
        <div class="col datefield border-right">
            <div class="container">
                <div class="row"><h3>{{ event.datetime | localtime | date:"d"}}</h3></div>
                <div class="row border-bottom border-dark"><h3>{{ event.datetime | localtime | date:"M"}}</h3></div>
                <div class="row pt-1">{{ event.datetime | localtime | date:"G.i"}}</div>
            </div>
        </div>
        <div class="col headline">
            <div class="container">
                <div class="row">
                    <div class="col">
                        {% if user in event.eventParticipants.all %}
                        <h3><a class="text-custom-hyperlink" href="{% url 'meetandeat:event-view' event.pk %}">{{ event.title }} <small>({{ event.eventParticipants.count }}/{{ event.participants_number }})</small></a></h3>
                        {% else %}
                        <!-- TODO: actual number of people inside event -->
                        <h3>{{ event.title }} <small>({{ event.eventParticipants.count }}/{{ event.participants_number }})</small></h3>
                        {% endif %}
                    </div>
                </div>
                <div class="spacing"></div>
                <div class="row">
                    <div class="col"><h5><span class="material-icons">room</span>{{ event.location }}</h5></div>
                </div>
            </div>
        </div>
        <div class="col right-col">
            <div class="container">
                <div class="row pt-1 pl-4">
                    <div class="col">
                        <div class="dropdown">
                            <a aria-expanded="false" aria-haspopup="true" class="material-icons btn-custom-dots"
                               data-toggle="dropdown" id="dropdownMenuLink" role="button">
                                more_horiz
                            </a>
                            <div aria-labelledby="dropdownMenuLink" class="dropdown-menu">
                                {% if event.user == user %}
                                <a class="dropdown-item" href="{% url 'meetandeat:edit-event' event.pk %}">Edit
                                    Event</a>
                                {% endif %}
                                {% if user in event.userReportings.all %}
                                <span class="dropdown-item">Already reported!</span>
                                {% else %}
                                <a class="dropdown-item" href="{% url 'meetandeat:report-event' event.pk %}">Report
                                    Event</a>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row pt-3 pl-3 pr-2">
                    <div class="col">
                        {% if user in event.eventParticipants.all %}
                        <a class="material-icons btn-custom-leave"
                           href="{% url 'meetandeat:leave-event' event.pk %}">remove</a>
                        {% else %}
                        <a class="material-icons btn-custom-add"
                           href="{% url 'meetandeat:join-event' event.pk %}">add</a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% else %}

{% endif %}
{% endfor %}
{% else %}
<p>No Results found</p>
{% endif %}


{{ form.media.js }}
{% endblock %}
